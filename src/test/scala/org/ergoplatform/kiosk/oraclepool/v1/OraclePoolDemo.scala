package org.ergoplatform.kiosk.oraclepool.v1

import org.ergoplatform.kiosk.ergo._
import org.scalatest.matchers.should.Matchers
import org.scalatest.propspec.AnyPropSpec

class OraclePoolDemo extends AnyPropSpec with OraclePool with Matchers {
  val minBoxValue = 2000000
  override lazy val livePeriod = 5 // blocks
  override lazy val prepPeriod = 5 // blocks
  override lazy val buffer = 4 // blocks

  override lazy val oracleTokenId: Array[Byte] = "12caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed".decodeHex
  override lazy val poolTokenId: Array[Byte] = "b662db51cf2dc39f110a021c2a31c74f0a1a18ffffbf73e8a051a7b8c0f09ebc".decodeHex

  override lazy val oracleReward = 2000000 // Nano ergs. One reward per data point to be paid to oracle
  lazy val addresses = Seq(
    "9iHunbPfq8ARpiJXc4vjmwvseeHWjmgeC797vSrdHSLNKxvKsYo",
    "9fj9NJpzo13HfNyCdzyfNP8zAfjiTY3pys1JP5wCzez8MiP8QbF",
    "9ebeQK9oJpDpTZSfqk6wdaHt3x1aUUba9S8dMufTpyQQYvE2XKU",
    "9fcrXXaJgrGKC8iu98Y2spstDDxNccXSR9QjbfTvtuv7vJ3NQLk"
  ).toArray

  override lazy val minPoolBoxValue = oracleReward * (addresses.size + 1) + minBoxValue // how much min must exist in oracle pool box

  property("Display Addresses") {
    println("minPoolBoxValue " + minPoolBoxValue)
    println(s"Live Epoch script length       : ${liveEpochErgoTree.bytes.length}")
    println(s"Live Epoch script complexity   : ${liveEpochErgoTree.complexity}")
    println(s"Epoch prep script length       : ${epochPrepErgoTree.bytes.length}")
    println(s"Epoch prep script complexity   : ${epochPrepErgoTree.complexity}")
    println(s"DataPoint script length        : ${dataPointErgoTree.bytes.length}")
    println(s"DataPoint script complexity    : ${dataPointErgoTree.complexity}")
    println(s"PoolDeposit script length      : ${poolDepositErgoTree.bytes.length}")
    println(s"PoolDeposit script complexity  : ${poolDepositErgoTree.complexity}")

    println("liveEpochAddress: " + liveEpochAddress)
    println("epochPrepAddress: " + epochPrepAddress)
    println("dataPointAddress: " + dataPointAddress)
    println("poolDepositAddress: " + poolDepositAddress)
    println("EpochPrepErgoTree: (for R6) " + KioskErgoTree(epochPrepErgoTree).serialize.encodeHex)
    println("minPoolBoxValue: " + minPoolBoxValue)

    liveEpochAddress shouldEqual "25JND1NjgzRvw6U2odqUSgakbLnnogZr2KyaWkasuv72cpWUVJin8xd17by19DqcumVWGVrTeyT9P6u52snd4XNXLgU1hkBJedGKXz14ujnLUiyjd5ddn3JY5qyHGKRrx47qzxtjLms4ykFZPU6VkTt7vjKXh3JUeaAwzWMdqZnC8jzYvC464Sy2yv5VVBb7RyPeo152U4xHu6XexspKLRDKUWmPWzrQJw4sRWy97Zkf9iGmHJngoq9UjETb3u4qigKdYZ1k8UAFrM5Xdq4EW2FVbjnbkJMt6Afb3zyTThmSMzfdw9gyym823qZHHQEtq5bs7zLcC9oTTC7uB5MLagrkD9SRAA6VNPSfQ8o1vo7Te4YHpV1tTghFURD154aUYf9rZAQWXLMSgPx2k2mBS6BxbkFZ7UZH6xgA9j6zLEix9BT7BCg34sqsx"
    epochPrepAddress shouldEqual "eqVbENamPw1TX46pzL2LD4nkTeKDFCUWxEp943WCeoF734kwCD6RVMHpCwFQ58AF8Fo5CpkE9QgyL6Tqi4KeSu3qzh8oFDNasT1VXbeoFrbg44LY2qbgbGtMwHna6d3xNsyfYBy1a2QBG3oZDoFHLyN3tsThU8FqKufWuLjwuAw1KkuV6drbTdZVQzU9QbPBqDL4pHVhAs2b6qKiygc4Rigfkta5uaLmBHTq6Pv1ZkP1ZQnUbge3npo6ccAhoY89Scte2SssFxtsDfC7fmNnaFvXxwyxF2fAmmz4oL62EBVnXk8184MDx9t5sj4doLNaaWxiJWqr1D8Hud6GwkouBCjkTBAnAA13Vt1HMH8BxWefEzdZnhKHVb3ethL3xCpPVBGuinK9QSRE2mGu3TcdPbYKc8pwtLgFAafza7ZoLp6Kk1zphkL8zqXefkiKhM7RQ8fM7U4QrrHg1qGJGUggSfF6Ydvnr7Tzyr4vZpwgtuYotzoXEpH6xscufJV5hk9oXHCTD6FJ2SU3QPLFiVdFJP9eJuCDfXzjZriHGMotvrYcQAkzM7uFgXyXEAMcnttMvrSvkfUGbC2USVzitv6iH6oXyiW7EN9qEWuS6ESCzL5Zosb3MPThFkmD1izgxTzEveDEenEg1ViZQfnAB4nAefwueE5mJvuuwf2dN257tYjDQkrfCBxsU5DTtSvYq5TGk72nbDjeV26ppWQHZJdTsLRSB58akCx5SMg9W1pyxbewPeb9AJZSPoLmiiSM7jc35HDk3jURV6yARaN6rMJ"
    dataPointAddress shouldEqual "8dwHTkPs3AEvUH33eeg24LSE4mwQtxxCcZufyV1za8vt2NqaEXhDDfPTnvbj3dN6j4QYo9sYDZRob2yWP1TbCZiZYyzj5pKWV4RFh8qA4gHBJJtGRUXAWi6FShqW6J57zTZEN9BchmKxGc6pLuHJpvrsbbnvtPiJx3vEdxqbMQkwsfPSKig87bmLgY5QUkZt1XufHH2HZPqwYEtsceTL53jkZ52yYsYVPuscK9h15YtGL3R46BsgQETJ4ZsHdM9boA57edAPZHDPY1z1b394bZEaHv91imnriRmVEv9XwDxpNxWLdu8bQ5eSWxg35FeuyhGVZb7Nw2RoWEKQrEHQK8UyM5j3iiiFoP3m9BWYKaNB1ynFCMQA6ozBCod7Wm5NRqTon7iibjcZ62AVdgKZZBVup43N7QEJQ9FDyxukj4YHCD8kAMM9UYPYrNATSs4ipgYtRgqDNEXKrsmiK6RiUferksq65yNrZ9xbC5Yq4kGQ3A6K8gKPcCQVegwnSq7yNdqFPvwgjaU1R1iQZLN1Uz3AWdU3pnhdPqVbyqQj5GhqMg9vRwCEcUKEztexjdfBBWiiiGtSQjhLdCKGqg1eV66DRV5AEXoQpGVrKmtVTt2kybz4VWH4rvU9w9pJJY71RMYx"
    poolDepositAddress shouldEqual "7HPqRZG82v9XLUvfrz1qHTCbhHgmmDCT8p7vWp19roYgtHjvTXDw5z5McxZsCTSgBziCP4gagUgNTEzewQQ8ymPfi5vnkseyAm3iu2k1uD8oALGKxPmTYQmZwWVz85mWn9tWxcDxTMjcy3S2Xyo9TahvzdAyaUZfKSWXYJtHLN74aP4ux1b1qHRzsbgjg9ZHwTmvHzujQgurGCpkoq2vUY32zEdPQBpktUGePCyGfPYeZ7NnEAZrb3Tt7V9z1GRXzaYCBPjZaEbhrgF9JTAnx36EYDqjHPrjr9xeLbLQPz6ZiXxo9eyuS7qEjsoV4wQ1RGGcdr1JCrF6Vrz8W8xc7YW729djrauQVtUrVSrnFF5BvBC5tLwW99sV2CreGLzoNyZrcQEJQHPawvYTmJ4KxpByap3EYzaV5rRQVtoeskUniLW7t45s4B8ynvEmy2mj5D68eveZwBsjUuU6ozGnFhAXTkzTeyxqh6p13wZcJ1quU1WtdKRmWJdib4dkK7WXBdZAUMnmH2ysjxXmGoKE4N1rsfThy5Lzt4bWtNQdBv2Jj3Vt5sUxrLjZs3S3tE7PdxXkc7mbaU3HoqFZXKeMcyxgcrrBG7V8WHr3EGZ9P8Cfq5Fo4QJ9proRKUBHcFiL5XGpZ1L5yKHTjF3sCkaEc5TnPsEdsu3N7TDDBGToQd4x2n1VJ8gVJvUuKGTyEwrzyGmHE4yf1n4txYicR4hnGrjNB5zHdQJpr3m2KbBdKC2aPvA4KD2xBRkZC7DsqKcUgvKgUnnnTR4ipTKcuzyEy2N93uo7vRHbkjAehV4rgL3NX6m6VQEBoPfj5KaVhXY5KXQSeq3nJW8X96BF1qLse41RQbKjK27qrMu7PZRkkRaDjcW6V9qzHKkPKWzWZgm7X2KCuB8g4QHMDjUSicX4JPQAaxmJBFqxEAHYu7vT31Xsu7p7QQGFct1vw46kqiMtLdYEvDmqCfPxSKmMYcAd"
    epochPrepErgoTree.bytes.encodeHex shouldEqual "100604000580dac40904140ebe02100d040004000e2012caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed0500040004140402048092f401040201010402058092f4010400d804d601b2a5730000d602b5db6501fed9010263ed93e4c67202050ec5a7938cb2db63087202730100017302d603b17202d6049db072027303d9010441639a8c720401e4c68c72040206057e720305ea02d1ededededededed93c27201e4c6a7060e917203730493db63087201db6308a793e4c672010405720493e4c6720105049ae4c6a70504730593e4c672010405720492c1720199c1a77e9c9a720373067307058cb07202860273087309d901053c400163d802d6078c720501d6088c72070186029a7208730aeded8c72070293c2b2a5720800d0cde4c68c720502040792c1b2a5720800730b02b2ad7202d9010563cde4c672050407730c00040a0408d806d601b2a5730000d602c67201060ed603e4c6a70504d604c1a7d6059272047301d6069aa3730295e67202d801d607ed93e47202c2a793c272017303eb02d1ededededededed8fa3720391a39972037304720593e4c672010405e4c6a7040593e4c672010504720393db63087201db6308a792c1720172047207d1ededededededed92a37203720593e4c672010405e4c6a7040592e4c672010504720690e4c6720105049a7206730593db63087201db6308a792c1720172047207d1edededed93e4c672010405e4c6a7040593e4c672010504720393c27201c2a793db63087201db6308a791c172017204"
    minPoolBoxValue shouldEqual 10000000L
  }
}
